--- engine/irc.cpp	2009-02-21 07:42:04.000000000 +0100
+++ engine/irc.cpp.new	2009-06-14 13:37:53.000000000 +0200
@@ -499,7 +499,7 @@
 			if(g)
 			{
 				const char *t = w[0];
-				char *u = strrchr(t, '!');
+				const char *u = strrchr(t, '!');
 				if(u)
 				{
 					user[0] = newstring(t, u-t)
